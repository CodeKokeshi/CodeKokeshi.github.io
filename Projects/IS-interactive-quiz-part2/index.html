<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intelligent Systems Interactive Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="importmap">
    {
        "imports": {
            "react": "https://esm.sh/react@18.2.0",
            "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
            "lucide-react": "https://esm.sh/lucide-react@0.292.0"
        }
    }
    </script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animation-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }
    </style>
</head>
<body class="bg-slate-100">
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useEffect } from 'react';
        import { createRoot } from 'react-dom/client';
        import { Play, CheckCircle, XCircle, RotateCcw, Trophy, Brain, ChevronRight, Star, BookOpen, Activity } from 'lucide-react';

        // DATA SOURCE - EXACT TEXT FROM PDF
        const QUIZ_DATA = [
          // LESSON 6: Decision Trees & Ensemble Learning
          {
            id: 'L6-1',
            lesson: 'Lesson 6',
            topic: 'Decision Trees',
            question: "What is a Decision Tree? It helps us to make decisions by mapping out...",
            options: [
              "different choices and their possible outcomes",
              "various neural pathways and their weights",
              "linear relationships between variables",
              "clusters of similar data points"
            ],
            correctAnswer: "different choices and their possible outcomes",
            type: "fill-in"
          },
          {
            id: 'L6-2',
            lesson: 'Lesson 6',
            topic: 'Decision Tree Structure',
            question: "Which node is defined as the 'Starting point representing the whole dataset'?",
            options: [
              "Root Node",
              "Internal Node",
              "Leaf Node",
              "Decision Branch"
            ],
            correctAnswer: "Root Node",
            type: "definition"
          },
          {
            id: 'L6-3',
            lesson: 'Lesson 6',
            topic: 'Decision Tree Structure',
            question: "What is Pruning defined as?",
            options: [
              "Removal of subnodes at the end of every node",
              "Adding new branches to increase complexity",
              "Splitting the dataset into training and testing",
              "Calculating the entropy of the root node"
            ],
            correctAnswer: "Removal of subnodes at the end of every node",
            type: "definition"
          },
          {
            id: 'L6-4',
            lesson: 'Lesson 6',
            topic: 'Types of Trees',
            question: "Classification Trees are used for predicting categorical outcomes. These trees split the data based on features to...",
            options: [
              "classify data into predefined categories",
              "predict continuous numerical values",
              "reduce the dimensionality of the data",
              "create random subsets of features"
            ],
            correctAnswer: "classify data into predefined categories",
            type: "fill-in"
          },
          {
            id: 'L6-5',
            lesson: 'Lesson 6',
            topic: 'Disadvantages',
            question: "One disadvantage of Decision Trees is 'Overfitting'. This happens if they are too deep, which means they...",
            options: [
              "memorize the data instead of learning general patterns",
              "fail to capture non-linear relationships",
              "become biased toward features with few categories",
              "cannot handle categorical data"
            ],
            correctAnswer: "memorize the data instead of learning general patterns",
            type: "concept"
          },
          {
            id: 'L6-6',
            lesson: 'Lesson 6',
            topic: 'Ensemble Learning',
            question: "In Bagging (Bootstrap Aggregating), models are trained independently on different random subsets of the training data. Their results are then combined usually by...",
            options: [
              "averaging (for regression) or voting (for classification)",
              "weighted sum based on error rates",
              "sequential correction of errors",
              "pruning the least effective trees"
            ],
            correctAnswer: "averaging (for regression) or voting (for classification)",
            type: "concept"
          },
          {
            id: 'L6-7',
            lesson: 'Lesson 6',
            topic: 'Random Forest',
            question: "Random Forest is a machine learning algorithm that uses many decision trees. When building each tree, it...",
            options: [
              "picks a few features at random to decide how to split the data",
              "uses all features at once to split the data",
              "weights the features based on importance",
              "calculates the distance between all features"
            ],
            correctAnswer: "picks a few features at random to decide how to split the data",
            type: "concept"
          },
          {
            id: 'L6-8',
            lesson: 'Lesson 6',
            topic: 'Boosting',
            question: "Boosting is an ensemble technique where weak models are trained in series such that each next model tries to...",
            options: [
              "correct errors of the previous model",
              "predict the outcome independently",
              "reduce the variance of the previous model",
              "increase the size of the dataset"
            ],
            correctAnswer: "correct errors of the previous model",
            type: "fill-in"
          },
          {
            id: 'L6-9',
            lesson: 'Lesson 6',
            topic: 'Specific Algorithms',
            question: "Which algorithm focuses on challenging examples by assigning weights to data points and combines weak classifiers with weighted voting?",
            options: [
              "AdaBoost (Adaptive Boosting)",
              "Random Forest",
              "CatBoost",
              "Random Subspace Method"
            ],
            correctAnswer: "AdaBoost (Adaptive Boosting)",
            type: "definition"
          },

          // LESSON 7: Collaborative Filtering
          {
            id: 'L7-1',
            lesson: 'Lesson 7',
            topic: 'Recommender Systems',
            question: "Collaborative Filtering recommends items based on...",
            options: [
              "similarity measures between users and/or items",
              "discriminating between interesting and uninteresting items",
              "the specific features of the item itself",
              "supervised machine learning classifiers"
            ],
            correctAnswer: "similarity measures between users and/or items",
            type: "definition"
          },
          {
            id: 'L7-2',
            lesson: 'Lesson 7',
            topic: 'Recommender Systems',
            question: "Content-Based Recommendation is supervised machine learning used to induce a classifier to...",
            options: [
              "discriminate between interesting and uninteresting items for the user",
              "find similar users and recommend what similar users like",
              "cluster users into groups based on ratings",
              "normalize ratings to find averages"
            ],
            correctAnswer: "discriminate between interesting and uninteresting items for the user",
            type: "definition"
          },
          {
            id: 'L7-3',
            lesson: 'Lesson 7',
            topic: 'Collaborative Filtering Logic',
            question: "In Collaborative Filtering, we don't use the features of the item to recommend it, rather we...",
            options: [
              "classify the users into clusters of similar types",
              "analyze the content attributes of the item",
              "calculate the Euclidean distance between items",
              "use a decision tree to predict the rating"
            ],
            correctAnswer: "classify the users into clusters of similar types",
            type: "concept"
          },
          {
            id: 'L7-4',
            lesson: 'Lesson 7',
            topic: 'Data Processing',
            question: "In the process of normalizing, we take the average rating of a user and subtract all the given ratings from it, so we'll get...",
            options: [
              "either positive or negative values as a rating",
              "a rounded value of 0 or 1",
              "the absolute distance between ratings",
              "the weighted average of the cluster"
            ],
            correctAnswer: "either positive or negative values as a rating",
            type: "concept"
          },

          // LESSON 8: K Nearest Neighbor (KNN)
          {
            id: 'L8-1',
            lesson: 'Lesson 8',
            topic: 'KNN Definition',
            question: "KNN is described as a 'lazy learner' because it...",
            options: [
              "memorizes the entire dataset instead of explicit model training",
              "takes a long time to process the training data",
              "only looks at a small subset of the data",
              "does not use a distance metric"
            ],
            correctAnswer: "memorizes the entire dataset instead of explicit model training",
            type: "definition"
          },
          {
            id: 'L8-2',
            lesson: 'Lesson 8',
            topic: 'KNN Core Principle',
            question: "KNN operates on a fundamental principle: similar things exist in...",
            options: [
              "close distance within a feature space",
              "different clusters of the dataset",
              "linear alignment along the axes",
              "hierarchical structures"
            ],
            correctAnswer: "close distance within a feature space",
            type: "fill-in"
          },
          {
            id: 'L8-3',
            lesson: 'Lesson 8',
            topic: 'Distance Metrics',
            question: "Euclidean distance is defined as...",
            options: [
              "the straight-line distance between two points in a plane or space",
              "the total distance you would travel along horizontal and vertical lines",
              "a family of distances which includes Manhattan distance",
              "the distance measured by probability distribution"
            ],
            correctAnswer: "the straight-line distance between two points in a plane or space",
            type: "definition"
          },
          {
            id: 'L8-4',
            lesson: 'Lesson 8',
            topic: 'Distance Metrics',
            question: "Manhattan Distance is also called...",
            options: [
              "taxicab distance",
              "crow-fly distance",
              "Minkowski distance",
              "Euclidean distance"
            ],
            correctAnswer: "taxicab distance",
            type: "definition"
          },
          {
            id: 'L8-5',
            lesson: 'Lesson 8',
            topic: 'KNN Steps',
            question: "In Step 4 of KNN for classification, the algorithm looks at which category the neighbors belong to and picks the one that appears the most. This is called...",
            options: [
              "majority voting",
              "taking the average",
              "weighted sum",
              "normalization"
            ],
            correctAnswer: "majority voting",
            type: "concept"
          },
          {
            id: 'L8-6',
            lesson: 'Lesson 8',
            topic: 'Disadvantages',
            question: "A disadvantage of KNN is the 'Curse of Dimensionality', where performance degrades significantly with high-dimensional data as...",
            options: [
              "distances become less meaningful",
              "the model overfits the training data",
              "calculation time decreases too much",
              "normalization becomes impossible"
            ],
            correctAnswer: "distances become less meaningful",
            type: "fill-in"
          }
        ];

        const LessonCard = ({ lesson, title, icon: Icon, color, onClick, count }) => (
          <button 
            onClick={onClick}
            className={`w-full bg-white p-6 rounded-2xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 border-l-8 ${color} group`}
          >
            <div className="flex items-center justify-between">
              <div className="flex items-center gap-4">
                <div className={`p-3 rounded-full ${color.replace('border-', 'bg-').replace('500', '100')}`}>
                  <Icon className={`w-6 h-6 ${color.replace('border-', 'text-')}`} />
                </div>
                <div className="text-left">
                  <h3 className="text-lg font-bold text-gray-800 group-hover:text-blue-600 transition-colors">{lesson}</h3>
                  <p className="text-sm text-gray-500">{title}</p>
                </div>
              </div>
              <div className="flex items-center gap-2">
                <span className="text-xs font-semibold bg-gray-100 px-2 py-1 rounded text-gray-600">{count} Qs</span>
                <ChevronRight className="w-5 h-5 text-gray-400 group-hover:text-blue-500" />
              </div>
            </div>
          </button>
        );

        const ProgressBar = ({ current, total, streak }) => {
          const progress = (current / total) * 100;
          return (
            <div className="w-full mb-6">
              <div className="flex justify-between items-center mb-2">
                <span className="text-sm font-bold text-gray-500">Question {current + 1} of {total}</span>
                <div className="flex items-center gap-2 text-orange-500">
                  <Star className="w-4 h-4 fill-current" />
                  <span className="text-sm font-bold">Streak: {streak}</span>
                </div>
              </div>
              <div className="h-3 bg-gray-200 rounded-full overflow-hidden">
                <div 
                  className="h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-500 ease-out"
                  style={{ width: `${progress}%` }}
                />
              </div>
            </div>
          );
        };

        function InteractiveQuiz() {
          const [gameState, setGameState] = useState('menu'); // menu, playing, results
          const [currentLesson, setCurrentLesson] = useState(null);
          const [questions, setQuestions] = useState([]);
          const [currentIndex, setCurrentIndex] = useState(0);
          const [score, setScore] = useState(0);
          const [streak, setStreak] = useState(0);
          const [showFeedback, setShowFeedback] = useState(false);
          const [selectedAnswer, setSelectedAnswer] = useState(null);
          const [isCorrect, setIsCorrect] = useState(false);
          const [missedQuestions, setMissedQuestions] = useState([]);

          const startQuiz = (filterLesson) => {
            let filtered = QUIZ_DATA;
            if (filterLesson !== 'all') {
              filtered = QUIZ_DATA.filter(q => q.lesson === filterLesson);
            }
            // Shuffle questions
            const shuffled = [...filtered].sort(() => Math.random() - 0.5);
            setQuestions(shuffled);
            setCurrentLesson(filterLesson);
            setGameState('playing');
            setCurrentIndex(0);
            setScore(0);
            setStreak(0);
            setMissedQuestions([]);
            setShowFeedback(false);
            setSelectedAnswer(null);
          };

          const handleAnswer = (answer) => {
            if (showFeedback) return;

            const correct = answer === questions[currentIndex].correctAnswer;
            setSelectedAnswer(answer);
            setIsCorrect(correct);
            setShowFeedback(true);

            if (correct) {
              setScore(s => s + 1);
              setStreak(s => s + 1);
            } else {
              setStreak(0);
              setMissedQuestions(prev => [...prev, questions[currentIndex]]);
            }
          };

          const nextQuestion = () => {
            if (currentIndex < questions.length - 1) {
              setCurrentIndex(c => c + 1);
              setShowFeedback(false);
              setSelectedAnswer(null);
            } else {
              setGameState('results');
            }
          };

          // --- MENU SCREEN ---
          if (gameState === 'menu') {
            return (
              <div className="min-h-screen bg-gray-50 p-4 flex flex-col items-center justify-center">
                <div className="max-w-md w-full space-y-8">
                  <div className="text-center space-y-2">
                    <div className="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                      <Brain className="w-8 h-8 text-blue-600" />
                    </div>
                    <h1 className="text-3xl font-extrabold text-gray-900 tracking-tight">
                      Intelligent Systems
                    </h1>
                    <p className="text-gray-500">Exam Study Guide Quiz</p>
                    <p className="text-xs text-blue-500 font-semibold uppercase tracking-wider">Word-for-Word Edition</p>
                  </div>

                  <div className="space-y-4">
                    <LessonCard 
                      lesson="Mastery Mode" 
                      title="All Lessons Combined (6, 7, & 8)" 
                      icon={Trophy} 
                      color="border-yellow-500" 
                      count={QUIZ_DATA.length}
                      onClick={() => startQuiz('all')} 
                    />
                    <LessonCard 
                      lesson="Lesson 6" 
                      title="Decision Trees & Ensemble" 
                      icon={Activity} 
                      color="border-green-500" 
                      count={QUIZ_DATA.filter(q => q.lesson === 'Lesson 6').length}
                      onClick={() => startQuiz('Lesson 6')} 
                    />
                    <LessonCard 
                      lesson="Lesson 7" 
                      title="Collaborative Filtering" 
                      icon={BookOpen} 
                      color="border-purple-500" 
                      count={QUIZ_DATA.filter(q => q.lesson === 'Lesson 7').length}
                      onClick={() => startQuiz('Lesson 7')} 
                    />
                    <LessonCard 
                      lesson="Lesson 8" 
                      title="K Nearest Neighbor (KNN)" 
                      icon={Activity} 
                      color="border-red-500" 
                      count={QUIZ_DATA.filter(q => q.lesson === 'Lesson 8').length}
                      onClick={() => startQuiz('Lesson 8')} 
                    />
                  </div>
                </div>
              </div>
            );
          }

          // --- RESULTS SCREEN ---
          if (gameState === 'results') {
            const percentage = Math.round((score / questions.length) * 100);
            
            return (
              <div className="min-h-screen bg-gray-50 p-4">
                <div className="max-w-2xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden">
                  <div className="p-8 text-center bg-gradient-to-b from-blue-600 to-blue-700 text-white">
                    <Trophy className="w-16 h-16 mx-auto mb-4 text-yellow-300" />
                    <h2 className="text-3xl font-bold mb-2">Quiz Complete!</h2>
                    <div className="text-6xl font-bold mb-2">{percentage}%</div>
                    <p className="opacity-80">You scored {score} out of {questions.length}</p>
                  </div>

                  <div className="p-8">
                    {missedQuestions.length > 0 ? (
                      <div className="mb-8">
                        <h3 className="font-bold text-gray-800 mb-4 flex items-center gap-2">
                          <RotateCcw className="w-5 h-5 text-red-500" />
                          Review Missed Questions
                        </h3>
                        <div className="space-y-4">
                          {missedQuestions.map((q) => (
                            <div key={q.id} className="bg-red-50 p-4 rounded-lg border border-red-100">
                              <p className="text-sm font-semibold text-red-600 mb-1">{q.topic}</p>
                              <p className="text-gray-800 font-medium mb-2">{q.question}</p>
                              <div className="text-sm">
                                <span className="text-gray-500">Correct Answer: </span>
                                <span className="font-bold text-green-600">{q.correctAnswer}</span>
                              </div>
                            </div>
                          ))}
                        </div>
                      </div>
                    ) : (
                      <div className="text-center p-8 text-green-600 font-bold text-lg">
                        Perfect Score! You nailed every definition word-for-word!
                      </div>
                    )}

                    <button 
                      onClick={() => setGameState('menu')}
                      className="w-full bg-gray-900 text-white py-4 rounded-xl font-bold text-lg hover:bg-gray-800 transition-all transform hover:scale-[1.02]"
                    >
                      Back to Menu
                    </button>
                  </div>
                </div>
              </div>
            );
          }

          // --- PLAYING SCREEN ---
          const currentQ = questions[currentIndex];
          
          return (
            <div className="min-h-screen bg-slate-100 p-4 flex flex-col items-center">
              <div className="w-full max-w-2xl">
                {/* Header */}
                <div className="flex justify-between items-center mb-6 bg-white p-4 rounded-xl shadow-sm">
                  <button onClick={() => setGameState('menu')} className="text-gray-400 hover:text-gray-600 font-semibold text-sm">
                    Exit
                  </button>
                  <span className="font-bold text-gray-800">{currentLesson === 'all' ? 'Mastery Mode' : currentLesson}</span>
                  <div className="w-10"></div> {/* Spacer for center alignment */}
                </div>

                <ProgressBar current={currentIndex} total={questions.length} streak={streak} />

                {/* Question Card */}
                <div className="bg-white rounded-3xl shadow-xl overflow-hidden transition-all duration-500">
                  <div className="p-8">
                    <div className="inline-block px-3 py-1 rounded-full bg-blue-50 text-blue-600 text-xs font-bold uppercase tracking-wider mb-4">
                      {currentQ.topic}
                    </div>
                    
                    <h2 className="text-xl md:text-2xl font-bold text-gray-800 mb-8 leading-relaxed">
                      {currentQ.question}
                    </h2>

                    <div className="space-y-3">
                      {currentQ.options.map((option, idx) => {
                        const isSelected = selectedAnswer === option;
                        const isCorrectOption = option === currentQ.correctAnswer;
                        
                        // Dynamic Classes for State
                        let btnClass = "w-full p-4 text-left rounded-xl border-2 transition-all duration-200 relative ";
                        
                        if (showFeedback) {
                          if (isCorrectOption) {
                            btnClass += "bg-green-50 border-green-500 text-green-800 font-medium";
                          } else if (isSelected && !isCorrectOption) {
                            btnClass += "bg-red-50 border-red-500 text-red-800 opacity-75";
                          } else {
                            btnClass += "border-gray-100 text-gray-400 opacity-50";
                          }
                        } else {
                          btnClass += "bg-white border-gray-100 hover:border-blue-300 hover:bg-blue-50 text-gray-700 hover:shadow-md";
                        }

                        return (
                          <button
                            key={idx}
                            onClick={() => handleAnswer(option)}
                            disabled={showFeedback}
                            className={btnClass}
                          >
                            <div className="flex items-center justify-between">
                              <span className="pr-8">{option}</span>
                              {showFeedback && isCorrectOption && <CheckCircle className="w-5 h-5 text-green-600 shrink-0" />}
                              {showFeedback && isSelected && !isCorrectOption && <XCircle className="w-5 h-5 text-red-600 shrink-0" />}
                            </div>
                          </button>
                        );
                      })}
                    </div>
                  </div>

                  {/* Feedback Footer */}
                  {showFeedback && (
                    <div className={`p-6 border-t animation-fade-in ${isCorrect ? 'bg-green-50' : 'bg-red-50'}`}>
                      <div className="flex items-center justify-between">
                        <div>
                          <p className={`font-bold text-lg ${isCorrect ? 'text-green-700' : 'text-red-700'}`}>
                            {isCorrect ? 'Correct!' : 'Not quite right.'}
                          </p>
                          <p className="text-sm text-gray-600 mt-1">
                            {isCorrect ? "Exact match with the study guide." : "Review the definition above."}
                          </p>
                        </div>
                        <button 
                          onClick={nextQuestion}
                          className={`px-6 py-3 rounded-xl font-bold text-white shadow-lg transform hover:scale-105 transition-all flex items-center gap-2 ${
                            isCorrect ? 'bg-green-600 hover:bg-green-700' : 'bg-red-600 hover:bg-red-700'
                          }`}
                        >
                          {currentIndex < questions.length - 1 ? 'Next Question' : 'Finish Quiz'}
                          <ChevronRight className="w-5 h-5" />
                        </button>
                      </div>
                    </div>
                  )}
                </div>
              </div>
            </div>
          );
        }

        const root = createRoot(document.getElementById('root'));
        root.render(<InteractiveQuiz />);
    </script>
</body>
</html>
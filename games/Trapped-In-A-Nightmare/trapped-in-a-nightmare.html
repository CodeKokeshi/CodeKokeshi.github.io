<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Trapped in a Nightmare | CodeKokeshi</title>
    <meta name="description" content="Play Trapped in a Nightmare - A horror adventure game by CodeKokeshi made in Godot." />
    <meta name="theme-color" content="#0f1116" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Manrope:wght@500;600;700&family=Press+Start+2P&family=Orbitron:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../../assets/css/site.css" data-cache-bust="true" />
    <style>
      .game-container {
        max-width: 900px;
        margin: 0 auto;
        padding: 2rem 0;
      }

      .game-embed {
        position: relative;
        width: 100%;
        max-width: 900px;
        margin: 2rem auto;
        padding: 2rem;
        background: var(--surface);
        border: 2px solid var(--border);
        border-radius: 12px;
        box-shadow: var(--shadow);
      }

      .game-embed iframe {
        display: block;
        width: 100%;
        aspect-ratio: 16 / 9;
        margin: 0 auto;
        border: none;
        border-radius: 8px;
        background: var(--bg);
      }

      .mobile-warning {
        display: none;
        padding: 2rem;
        background: var(--surface);
        border: 2px solid var(--accent);
        border-radius: 12px;
        text-align: center;
        margin: 2rem auto;
      }

      .mobile-warning h3 {
        color: var(--accent);
        margin-bottom: 1rem;
        font-size: 1.5rem;
      }

      .mobile-warning p {
        color: var(--text);
        line-height: 1.8;
        margin-bottom: 1.5rem;
      }

      .mobile-warning .icon {
        font-size: 3rem;
        margin-bottom: 1rem;
      }

      .game-info {
        background: var(--surface);
        border: 2px solid var(--border);
        border-radius: 12px;
        padding: 2rem;
        margin-bottom: 2rem;
      }

      .game-info h2 {
        color: var(--text);
        font-family: var(--font-heading);
        margin-bottom: 1rem;
      }

      .game-info p {
        color: var(--text);
        line-height: 1.8;
        margin-bottom: 1rem;
      }

      .game-meta {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
        margin-top: 1.5rem;
      }

      .meta-item {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 1rem;
        background: var(--surface-alt);
        border: 1px solid var(--border);
        border-radius: 8px;
        font-size: 0.875rem;
        color: var(--muted);
      }

      .meta-item strong {
        color: var(--accent);
      }

      .back-button {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 1.5rem;
        color: var(--accent);
        text-decoration: none;
        font-weight: 600;
        transition: all 0.3s ease;
      }

      .back-button:hover {
        transform: translateX(-4px);
        color: var(--accent-strong);
      }

      @media (max-width: 980px) {
        .game-embed {
          padding: 1.5rem;
        }
      }

      @media (max-width: 620px) {
        .game-embed {
          padding: 1rem;
        }
      }

      [data-theme="wood"] .game-info h2 {
        font-size: 1rem;
      }

      [data-theme="wood"] .game-info p,
      [data-theme="wood"] .meta-item {
        font-size: 0.7rem;
      }

      [data-theme="wood"] .back-button {
        font-size: 0.7rem;
      }

      [data-theme="wood"] .mobile-warning h3 {
        font-size: 0.9rem;
      }

      [data-theme="wood"] .mobile-warning p {
        font-size: 0.7rem;
      }
    </style>
  </head>
  <body>
    <canvas id="particle-canvas"></canvas>
    <div class="page-shell">
      <header class="top-bar">
        <a class="brand" href="../../index.html">Code Kokeshi</a>
        <nav class="nav-links" aria-label="Pages">
          <a class="nav-link" href="../../gamedev.html">Game Dev</a>
          <a class="nav-link" href="../../art.html">Art</a>
          <a class="nav-link" href="../../projects.html">Projects</a>
          <a class="nav-link" href="../../thesis_section/index.html">Thesis</a>
        </nav>
        <div class="theme-switcher" role="group" aria-label="Theme selector">
          <span class="theme-label">Theme</span>
          <button type="button" class="theme-button" data-theme-option="dark" aria-pressed="false">Dark</button>
          <button type="button" class="theme-button" data-theme-option="light" aria-pressed="false">Light</button>
          <button type="button" class="theme-button" data-theme-option="wood" aria-pressed="false">Retro</button>
          <button type="button" class="theme-button" data-theme-option="cyberpunk" aria-pressed="false">Cyberpunk</button>
        </div>
      </header>

      <main>
        <div class="game-container">
          <a href="../../gamedev.html" class="back-button">
            ‚Üê Back to Game Dev
          </a>

          <div class="game-info">
            <h2>Trapped in a Nightmare</h2>
            <p>A top-down action game featuring slash and shoot combat, inspired by Hyper Light Drifter's gameplay style... but different story, I guess?</p>
            
            <div class="alert alert-info" style="background: var(--surface-alt); border: 2px solid var(--accent); border-radius: 8px; padding: 1rem; margin: 1rem 0;">
              <strong style="color: var(--accent);">‚ö†Ô∏è Important:</strong>
              <span style="color: var(--text);"> Please enable hardware acceleration (also known as 3D acceleration or graphics acceleration) in your browser settings for optimal performance.</span>
            </div>
            
            <div class="game-meta">
              <div class="meta-item">
                <strong>Engine:</strong> Godot
              </div>
              <div class="meta-item">
                <strong>Genre:</strong> Action / Top-Down Shooter
              </div>
              <div class="meta-item">
                <strong>Platform:</strong> Web Browser
              </div>
            </div>
          </div>

          <div class="game-embed" id="game-embed">
            <iframe frameborder="0" src="https://itch.io/embed-upload/15368666?color=333333" allowfullscreen="" width="960" height="560">
              <a href="https://codekokeshi.itch.io/trapped-in-a-nightmare">Play Trapped in a Nightmare on itch.io</a>
            </iframe>
          </div>

          <div class="mobile-warning" id="mobile-warning">
            <div class="icon">üéÆ‚ö†Ô∏è</div>
            <h3>Desktop Only</h3>
            <p>This game requires a keyboard to play and is only available on desktop devices.</p>
            <p>Please visit this page on a computer to play the game.</p>
            <div class="link-row">
              <a class="btn" href="https://codekokeshi.itch.io/trapped-in-a-nightmare" target="_blank" rel="noopener">View on itch.io</a>
            </div>
          </div>

          <div class="game-info">
            <h2>About the Game</h2>
            <p><strong>Trapped in a Nightmare</strong> is a top-down action game where you slash and shoot your way through an endless facility filled with hostile creatures.</p>
            <p><strong>Gameplay:</strong> Combat inspired by Hyper Light Drifter with fast-paced melee and ranged attacks. Explore the facility, upgrade your weapons through NPCs, and face increasingly challenging enemies.</p>
            <p><strong>Story:</strong> The protagonist awakens in a grassland, finds a sword, and enters a mysterious doorway leading to an abandoned laboratory. Throughout the journey, you'll encounter NPCs including a companion who wants to escape with you. As you progress, the companion becomes the second final boss, and the true final boss‚Äîa glitchy, distorted entity‚Äîattacks with AOE patterns that spell out "WAKE UP." Everything was a fever dream all along.</p>
            <div class="link-row">
              <a class="btn" href="https://codekokeshi.itch.io/trapped-in-a-nightmare" target="_blank" rel="noopener">View Full Page on itch.io</a>
            </div>
          </div>
        </div>
      </main>

      <footer class="site-footer">¬© <span id="year"></span> CodeKokeshi. Built with intention.</footer>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script defer src="../../assets/js/animations.js"></script>
    <script defer src="../../assets/js/site.js"></script>
    <script>
      document.getElementById("year").textContent = new Date().getFullYear();

      // Mobile detection
      function isMobileDevice() {
        // Check if touch device
        const hasTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
        
        // Check screen size
        const isSmallScreen = window.innerWidth <= 768;
        
        // Check user agent
        const mobileRegex = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i;
        const isMobileUA = mobileRegex.test(navigator.userAgent);
        
        // Return true if it's a touch device OR small screen OR mobile user agent
        return (hasTouch && isSmallScreen) || isMobileUA;
      }

      // Show/hide game embed based on device
      window.addEventListener('DOMContentLoaded', function() {
        const gameEmbed = document.getElementById('game-embed');
        const mobileWarning = document.getElementById('mobile-warning');
        
        if (isMobileDevice()) {
          gameEmbed.style.display = 'none';
          mobileWarning.style.display = 'block';
        } else {
          gameEmbed.style.display = 'block';
          mobileWarning.style.display = 'none';
        }
      });

      // Recheck on window resize
      window.addEventListener('resize', function() {
        const gameEmbed = document.getElementById('game-embed');
        const mobileWarning = document.getElementById('mobile-warning');
        
        if (isMobileDevice()) {
          gameEmbed.style.display = 'none';
          mobileWarning.style.display = 'block';
        } else {
          gameEmbed.style.display = 'block';
          mobileWarning.style.display = 'none';
        }
      });
    </script>
  </body>
</html>
